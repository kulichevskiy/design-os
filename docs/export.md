# Экспорт

Когда дизайн готов, экспортируйте все, что нужно агенту реализации (или команде), чтобы собрать продукт.

## Когда экспортировать

Вы готовы к экспорту, когда:

- видение продукта и дорожная карта определены
- хотя бы один раздел имеет дизайн экранов
- вас устраивает дизайн-направление

Экспорт возможен в любой момент — не обязательно ждать "полной готовности". Экспорт создает снимок текущего состояния дизайнов. Вы всегда можете экспортировать снова по мере добавления разделов.

## Запуск экспорта

```
/export-product
```

Команда экспорта:

1. **Проверяет требования** — убеждается, что нужные файлы существуют
2. **Собирает все дизайн-артефакты** — компоненты, типы, данные, токены
3. **Генерирует инструкции реализации** — включая готовые промпты
4. **Генерирует инструкции по тестам** — TDD-спеки для каждого раздела
5. **Создает пакет экспорта** — полный каталог `product-plan/`
6. **Создает zip-файл** — `product-plan.zip` для удобного скачивания

## Что входит в пакет

### Готовые промпты

```
product-plan/prompts/
├── one-shot-prompt.md     # Промпт для полной реализации
└── section-prompt.md      # Шаблон промпта для поэтапной работы
```

Это готовые промпты, которые вы копируете в своего кодинг-агента. Они ссылаются на инструкции и побуждают агента задать важные уточняющие вопросы про аутентификацию, модель пользователей и техстек перед началом реализации.

### Инструкции

```
product-plan/
├── product-overview.md              # Сводка продукта (всегда прикладывать)
└── instructions/
    ├── one-shot-instructions.md     # Все этапы в одном документе
    └── incremental/                 # Реализация по этапам
        ├── 01-foundation.md         # Дизайн-токены, модель данных, маршрутизация
        ├── 02-shell.md              # Реализация оболочки приложения
        ├── 03-[section-id].md        # По одному на раздел (например, 03-invoices.md)
        └── ...
```

**product-overview.md** дает контекст по всему продукту — всегда включайте его в любой сеанс реализации.

**one-shot-instructions.md** объединяет все этапы в один документ. Используйте его вместе с `one-shot-prompt.md` для полной реализации.

**Пошаговые инструкции** разбивают работу на этапы. Используйте их вместе с `section-prompt.md` для поэтапной реализации.

### Система дизайна

```
product-plan/design-system/
├── tokens.css           # CSS-переменные
├── tailwind-colors.md   # Руководство по настройке Tailwind
└── fonts.md             # Настройка Google Fonts
```

### Модель данных

```
product-plan/data-model/
├── README.md            # Описания сущностей
├── types.ts             # Интерфейсы TypeScript
└── sample-data.json     # Сводные примерные данные
```

### Компоненты оболочки

```
product-plan/shell/
├── README.md            # Замысел дизайна
├── components/
│   ├── AppShell.tsx     # Основная обертка макета
│   ├── MainNav.tsx      # Навигация
│   ├── UserMenu.tsx     # Меню пользователя
│   └── index.ts         # Экспорты
└── screenshot.png       # Визуальный референс (если снят)
```

### Компоненты раздела

Для каждого раздела:

```
product-plan/sections/[section-id]/
├── README.md            # Обзор функции, пользовательские сценарии
├── tests.md             # Инструкции по тестам (TDD)
├── components/
│   ├── [Component].tsx  # Экспортируемые компоненты
│   └── index.ts         # Экспорты
├── types.ts             # Интерфейсы TypeScript
├── sample-data.json     # Тестовые данные
└── screenshot.png       # Визуальный референс (если снят)
```

### Инструкции по тестам

Каждый раздел включает файл `tests.md` с независимыми от фреймворка инструкциями по написанию тестов:

- **Тесты пользовательских сценариев** — успешные и неуспешные пути ключевых взаимодействий
- **Тесты пустых состояний** — проверка UI, когда нет записей
- **Тесты взаимодействия компонентов** — конкретные элементы и поведения для проверки

Эти инструкции описывают ЧТО тестировать, а не КАК — ваш агент адаптирует их под ваш фреймворк (Jest, Vitest, Playwright, Cypress, RSpec, Minitest, PHPUnit и т.д.).

## О компонентах

Экспортированные компоненты:

- **На props** — принимают данные и коллбеки через props, не импортируют данные напрямую
- **Переносимые** — работают с любым React-стеком без зависимостей на Design OS
- **Полные** — полноценная стилизация, адаптивность, поддержка темной темы
- **Готовые к продакшену** — не прототипы и не макеты

```tsx
// Компоненты ожидают данные и коллбеки через props
<InvoiceList
  invoices={data}
  onView={(id) => navigate(`/invoices/${id}`)}
  onEdit={(id) => navigate(`/invoices/${id}/edit`)}
  onDelete={(id) => confirmDelete(id)}
  onCreate={() => navigate('/invoices/new')}
/>
```

Задачи агента реализации:
- Подключить коллбеки к маршрутизации и API-вызовам
- Заменить примерные данные реальными данными из бэкенда
- Реализовать корректную обработку ошибок и состояния загрузки
- Реализовать пустые состояния при отсутствии записей (новые пользователи, после удаления)
- Построить необходимые бэкенд-API для компонентов
- Написать тесты по предоставленным инструкциям (подход TDD)

## Использование экспорта

Подробные инструкции по внедрению дизайна в вашу кодовую базу — в [Внедрение в кодовую базу](codebase-implementation.md).
