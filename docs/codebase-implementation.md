# Внедрение в кодовую базу

После экспорта дизайнов из Design OS у вас есть полный пакет передачи, готовый к реализации. Это руководство объясняет, как работать с вашим AI-агентом и собрать продукт.

## Начало работы

1. Скопируйте папку `product-plan/` в целевую кодовую базу
2. Запустите AI-агента (Claude Code, Cursor и т.д.)
3. Выберите подход к реализации: за один проход или поэтапно

## Подходы к реализации

### Вариант A: поэтапная реализация (рекомендуется)

Подходит для крупных продуктов или когда важно контролировать прогресс.

**Как это работает:**

Идите по инструкциям по порядку:

1. **Foundation** (`instructions/incremental/01-foundation.md`) — дизайн-токены, типы модели данных, маршрутизация
2. **Shell** (`instructions/incremental/02-shell.md`) — оболочка приложения и навигация
3. **Sections** (`instructions/incremental/03-*.md`, `04-*.md` и т.д.) — каждый раздел по очереди

Для каждого этапа:

1. Откройте `product-plan/prompts/section-prompt.md`
2. Заполните переменные вверху (SECTION_NAME, SECTION_ID, NN)
3. Добавьте заметки по конкретному разделу
4. Скопируйте и вставьте промпт в вашего агента
5. Ответьте на уточняющие вопросы и дайте агенту реализовать
6. Проверьте и протестируйте перед следующим этапом

**Промпт раздела:**

- Ссылается на инструкции и материалы раздела
- Указывает на `tests.md` для тестовой разработки
- Спрашивает про авторизацию, связи данных и точки интеграции

### Вариант B: реализация за один проход

Подходит для простых продуктов или когда хотите сделать все за один сеанс.

**Как это работает:**

1. Откройте `product-plan/prompts/one-shot-prompt.md`
2. Добавьте дополнительные заметки (предпочтения по техстеку, ограничения)
3. Скопируйте и вставьте промпт в вашего агента
4. Ответьте на уточняющие вопросы агента об авторизации, модели пользователей и т.д.
5. Дайте агенту спланировать и реализовать все целиком

Промпт ссылается на `product-overview.md` и `instructions/one-shot-instructions.md` и направляет агента задать важные вопросы до старта.

**В промпте есть вопросы про:**

- Аутентификацию и авторизацию (методы входа, роли)
- Моделирование пользователей и аккаунтов (одиночные vs командные, workspace)
- Предпочтения по техстеку (бэкенд-фреймворк, база данных)
- Другие необходимые уточнения

## Разработка через тесты (TDD)

Каждый раздел включает файл `tests.md` с подробными инструкциями по тестам. Мы рекомендуем TDD-подход:

1. **Прочитайте инструкции** — изучите `sections/[section-id]/tests.md`
2. **Напишите падающие тесты** — по описанным сценариям и проверкам
3. **Реализуйте функцию** — добейтесь прохождения тестов
4. **Сделайте рефакторинг** — очистите код, сохранив зеленые тесты

Инструкции по тестам включают:

- **Тесты пользовательских сценариев** — успешные и неуспешные пути
- **Тесты пустых состояний** — поведение при отсутствии записей
- **Тесты взаимодействия компонентов** — конкретные элементы и поведения
- **Крайние случаи** — граничные условия и переходы

Инструкции по тестам **независимы от фреймворка** — они описывают ЧТО тестировать, а не КАК. Адаптируйте под ваш стек (Jest, Vitest, Playwright, Cypress, RSpec, Minitest, PHPUnit и т.д.).

## Разработка по спецификации

Также рекомендуем подход, основанный на спецификации:

1. **Изучите дизайн** — поймите, что и почему спроектировано
2. **Задайте уточняющие вопросы** — устраните двусмысленности перед кодом
3. **Составьте техническую спецификацию** — архитектура бэкенда, контракты API, схема БД
4. **Сначала напишите тесты** — по предоставленным инструкциям
5. **Реализуйте** — так, чтобы тесты проходили
6. **Проверьте** — соответствие реализации дизайну

Такой подход снижает риск потери времени из-за недопониманий и обеспечивает поддержку дизайнов на бэкенде.

## Уточняющие вопросы

Перед финализацией плана реализации предложите агенту задавать вопросы вроде:

**Архитектура:**
- Какой бэкенд-фреймворк используем?
- Как должна работать авторизация?
- Есть ли в этой кодовой базе принятые паттерны?

**Данные:**
- Как расширять модель данных относительно описанной?
- Есть ли правила валидации сверх того, что видно в UI?
- Как обрабатывать связи (жадная/ленивая загрузка)?

**Интеграция:**
- Как реализовать коллбеки (API-вызовы, локальное состояние)?
- Какие паттерны обработки ошибок применять?
- Есть ли готовые UI-компоненты, которые нужно переиспользовать?

**Объем:**
- Реализовать все функции в этом этапе или приоритизировать?
- Есть ли фичи, которые можно отложить?
- Какова стратегия тестирования?

## Что агенту нужно реализовать

Экспорт Design OS дает готовые UI-дизайны. Агенту реализации все еще нужно создать:

**Бэкенд:**
- Схему БД и миграции
- API-эндпоинты (REST или GraphQL)
- Бизнес-логику и валидацию
- Аутентификацию и авторизацию

**Слой данных:**
- Настройку управления состоянием
- Получение и кэширование данных
- Реалтайм-обновления (при необходимости)

**Интеграция:**
- Настройку маршрутизации
- Реализацию коллбеков
- Обработку ошибок и состояния загрузки
- Обработку пустых состояний (когда нет записей)
- Валидацию и отправку форм

**Тесты:**
- Модульные и интеграционные тесты на основе `tests.md`
- Тесты пользовательских сценариев (успех и ошибка)
- Проверку пустых состояний

**UI-компоненты уже готовы и годятся для продакшена.** Сфокусируйте усилия на слое данных, бэкенде и тестах — не переделывайте и не рестилизируйте компоненты.

## Советы

- **Используйте готовые промпты** — они включают важные вопросы про авторизацию и модель данных
- **Всегда прикладывайте product-overview.md** — он дает контекст по всему продукту
- **Сначала пишите тесты** — используйте инструкции из `tests.md` для TDD
- **Проверяйте поэтапно** — реализация по разделам помогает раньше ловить проблемы
- **Сначала тестируйте на sample-data.json** — до интеграции реальных API
- **Обрабатывайте пустые состояния** — поддерживайте хороший UX при отсутствии записей
- **Доверьтесь компонентам** — они уже спроектированы и стилизованы; подключайте, не пересобирайте
