# Директивы агента для Design OS

Design OS — инструмент для планирования и дизайна продукта, который помогает определить видение продукта, структурировать модель данных, спроектировать UI и подготовить экспортные пакеты для внедрения в отдельной кодовой базе.

> **Важно**: Design OS — это инструмент планирования, а не финальная кодовая база продукта. Экранные дизайны и компоненты, созданные здесь, предназначены для экспорта и интеграции в вашу реальную кодовую базу продукта.

---

## Контекст Design OS

Работая с Design OS, учитывайте два разных контекста:

### 1. Приложение Design OS
React-приложение, которое отображает и управляет файлами планирования. При изменении UI Design OS:
- Файлы живут в `src/` (компоненты, страницы, утилиты)
- Используется дизайн-система Design OS (палитра stone, DM Sans и т.д.)
- Интерфейс для просмотра спецификаций, дизайнов экранов, экспортов и т.д.

### 2. Дизайн продукта (дизайны экранов и экспорт)
Продукт, который вы планируете и проектируете. При создании дизайнов экранов и экспортов:
- Компоненты дизайна экранов находятся в `src/sections/[section-name]/` и `src/shell/`
- Файлы определения продукта находятся в `product/`
- Экспорт пакуется в `product-plan/` для интеграции в отдельную кодовую базу
- Следуйте требованиям дизайна в спецификациях разделов

---

## Начало работы — поток планирования

Design OS следует структурированному процессу планирования:

### 1. Обзор продукта (`/product-vision`)
Определите базовое описание продукта, проблемы, которые он решает, и ключевые возможности.
**Выход:** `product/product-overview.md`

### 2. Дорожная карта продукта (`/product-roadmap`)
Разбейте продукт на 3–5 разделов разработки. Каждый раздел — самостоятельная область, которую можно спроектировать и реализовать независимо.
**Выход:** `product/product-roadmap.md`

### 3. Модель данных (`/data-model`)
Определите ключевые сущности и связи в продукте. Это формирует "существительные" системы и обеспечивает согласованность между разделами.
**Выход:** `product/data-model/data-model.md`

### 4. Система дизайна (`/design-tokens`)
Выберите палитру (из Tailwind) и типографику (из Google Fonts). Эти токены применяются ко всем дизайнам экранов.
**Выход:** `product/design-system/colors.json`, `product/design-system/typography.json`

### 5. Оболочка приложения (`/design-shell`)
Спроектируйте постоянную навигацию и компоновку, которая оборачивает все разделы.
**Выход:** `product/shell/spec.md`, `src/shell/components/`

### 6. Для каждого раздела:
- `/shape-section` — Определить спецификацию
- `/sample-data` — Создать примерные данные и типы
- `/design-screen` — Создать дизайны экранов
- `/screenshot-design` — Сделать скриншоты дизайна

### 7. Экспорт (`/export-product`)
Сгенерируйте полный пакет передачи со всеми компонентами, типами и документацией.
**Выход:** `product-plan/`

---

## Структура файлов

```
product/                           # Определение продукта (переносимое)
├── product-overview.md            # Описание продукта, проблемы/решения, функции
├── product-roadmap.md             # Список разделов с заголовками и описаниями
│
├── data-model/                    # Глобальная модель данных
│   └── data-model.md              # Описание сущностей и связей
│
├── design-system/                 # Дизайн-токены
│   ├── colors.json                # { primary, secondary, neutral }
│   └── typography.json            # { heading, body, mono }
│
├── shell/                         # Оболочка приложения
│   └── spec.md                    # Спецификация оболочки
│
└── sections/
    └── [section-name]/
        ├── spec.md                # Спецификация раздела
        ├── data.json              # Примерные данные для дизайнов экранов
        ├── types.ts               # TypeScript интерфейсы
        └── *.png                  # Скриншоты

src/
├── shell/                         # Компоненты оболочки
│   ├── components/
│   │   ├── AppShell.tsx
│   │   ├── MainNav.tsx
│   │   ├── UserMenu.tsx
│   │   └── index.ts
│   └── ShellPreview.tsx
│
└── sections/
    └── [section-name]/
        ├── components/            # Экспортируемые компоненты
        │   ├── [Component].tsx
        │   └── index.ts
        └── [ViewName].tsx         # Preview-обертка

product-plan/                      # Экспортный пакет (генерируется)
├── README.md                      # Быстрый старт
├── product-overview.md            # Сводка продукта
├── prompts/                       # Готовые промпты для кодинг-агентов
│   ├── one-shot-prompt.md         # Промпт для полной реализации
│   └── section-prompt.md          # Шаблон промпта для поэтапной работы
├── instructions/                  # Инструкции по реализации
│   ├── one-shot-instructions.md   # Все этапы в одном документе
│   └── incremental/               # Инструкции по этапам
│       ├── 01-foundation.md
│       ├── 02-shell.md
│       └── [NN]-[section-id].md   # Инструкции по разделам
├── design-system/                 # Токены, цвета, шрифты
├── data-model/                    # Типы и примерные данные
├── shell/                         # Компоненты оболочки
└── sections/                      # Компоненты разделов (с tests.md)
```

---

## Требования к дизайну

При создании дизайнов экранов соблюдайте следующие правила:

- **Адаптивность**: используйте Tailwind-прифексы (`sm:`, `md:`, `lg:`, `xl:`), чтобы макеты корректно адаптировались под разные экраны.

- **Светлая и темная темы**: используйте варианты `dark:` для всех цветов. Проверьте, что все элементы читаемы в обеих темах.

- **Используйте дизайн-токены**: если токены определены, применяйте палитру и типографику продукта. Если нет — используйте `stone` для нейтралей и `lime` для акцентов.

- **Компоненты на props**: все компоненты дизайнов экранов должны принимать данные и коллбеки через props. Никогда не импортируйте данные напрямую в экспортируемые компоненты.

- **Без навигации в дизайнах разделов**: дизайны разделов не должны содержать навигационный хром. За навигацию отвечает оболочка.

---

## Директивы Tailwind CSS

Эти правила применяются и к приложению Design OS, и к создаваемым дизайнам:

- **Tailwind CSS v4**: всегда используем Tailwind CSS v4 (не v3). Не используйте паттерны v3.

- **Без tailwind.config.js**: Tailwind CSS v4 не использует `tailwind.config.js`. Никогда не создавайте и не изменяйте его.

- **Используйте встроенные утилиты**: избегайте кастомного CSS. Стилизуйте через встроенные утилиты Tailwind.

- **Используйте встроенные цвета**: не определяйте собственные цвета. Используйте стандартные классы Tailwind (например, `stone-500`, `lime-400`, `red-600`).

---

## Четыре опоры

Design OS организован вокруг четырех ключевых областей:

1. **Обзор продукта** — "что" и "почему"
   - Название и описание продукта
   - Проблемы и решения
   - Ключевые возможности
   - Разделы/дорожная карта

2. **Модель данных** — "существительные" системы
   - Названия и описания сущностей
   - Связи между сущностями
   - Минимальный объем — оставляет место для реализации

3. **Система дизайна** — "внешний вид"
   - Цветовая палитра (цвета Tailwind)
   - Типографика (Google Fonts)

4. **Оболочка приложения** — постоянный хром
   - Глобальная структура навигации
   - Меню пользователя
   - Паттерн компоновки

Плюс **Разделы** — индивидуальные фичи, каждая со спецификацией, данными и дизайнами экранов.

---

## Область применения дизайн-системы

Design OS разделяет ответственность между собственным UI и продуктом:

- **UI Design OS**: всегда использует палитру stone/lime и шрифт DM Sans
- **Дизайны экранов продукта**: используют токены, определенные для продукта (если есть)
- **Оболочка**: использует токены продукта для предпросмотра полного приложения

---

## Экспорт и передача

Команда `/export-product` генерирует полный пакет передачи:

- **Готовые промпты**: готовые промпты для копирования в кодинг-агента
  - `one-shot-prompt.md`: для полной реализации за один проход
  - `section-prompt.md`: шаблон для поэтапной работы
- **Инструкции реализации**: подробные руководства по каждому этапу
  - `product-overview.md`: всегда предоставляется для контекста
  - `one-shot-instructions.md`: все этапы в одном документе
  - Инкрементальные инструкции в `instructions/incremental/`
- **Инструкции по тестам**: каждый раздел включает `tests.md` со спецификациями TDD
- **Переносимые компоненты**: компоненты на props, готовые для любой React-сборки

Промпты направляют агента реализации задавать уточняющие вопросы об аутентификации, моделировании пользователей и техстеке до начала работы. Инструкции по тестам не завязаны на конкретные фреймворки и включают пользовательские сценарии, пустые состояния и крайние случаи.

---

## Дизайн-система (приложение Design OS)

Приложение Design OS использует эстетку "Refined Utility":

- **Типографика**: DM Sans для заголовков и текста, IBM Plex Mono для кода
- **Цвета**: палитра stone для нейтралей (теплые серые), lime для акцентов
- **Компоновка**: максимальная ширина контента 800px, много воздуха
- **Карточки**: минимальные границы (1px), легкие тени, щедрые отступы
- **Анимации**: легкие fade-in (200ms), без пружинящих эффектов
